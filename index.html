<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¯æ—¥ä»™å¥³å¡ | Fairy Daily</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>

    <style>
      @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=ZCOOL+KuaiLe&family=Noto+Sans+SC:wght@400;500;700&display=swap');
      
      body, html { 
        margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; 
        background-color: #7dd3fc; 
        font-family: 'Fredoka', 'Noto Sans SC', sans-serif;
      }
      .pop-font { font-family: 'ZCOOL KuaiLe', 'Fredoka', cursive; }
      .perspective-1000 { perspective: 1000px; }
      .transform-style-3d { transform-style: preserve-3d; }
      .backface-hidden { backface-visibility: hidden; }
      .rotate-y-180 { transform: rotateY(180deg); }
      .app-container {
        position: absolute; top: 0; left: 0; right: 0; bottom: 0;
        display: flex; flex-direction: column; align-items: center; justify-content: center;
      }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
      import { GoogleGenerativeAI } from "@google/generative-ai";
      const { useState, useEffect, useMemo } = React;
      const { createRoot } = ReactDOM;

      // =================================================================
      // ğŸ”‘ é‡ç‚¹ï¼šè¯·æŠŠä½ çš„ Key ç²˜è´´åœ¨ä¸‹é¢çš„å¼•å·ä¸­é—´
      // âŒ é”™è¯¯ç¤ºèŒƒï¼šconst YOUR_API_KEY = AIzaSy...; (æ²¡æœ‰å¼•å·ï¼Œä¼šæŠ¥é”™ï¼)
      // âœ… æ­£ç¡®ç¤ºèŒƒï¼šconst YOUR_API_KEY = "AIzaSy..."; (ä¿ç•™å¼•å·)
      // =================================================================
      
      const YOUR_API_KEY = "AIzaSyBAvDfnYtzXmeeycna88DN8YRIHBWcP_4Q"; 

      // =================================================================

      // å›¾æ ‡ç»„ä»¶
      const Icons = {
        Cloud: () => <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M17.5 19c0-1.7-1.3-3-3-3h-1.1c-.2-1.3-1-2.4-2.2-3-1.6-.7-3.4-.2-4.4 1.2-1.1-1.6-3.3-2-4.9-1-1.6 1.1-2 3.3-1 4.9.4.7 1.1 1.2 1.9 1.4"/></svg>,
        Sparkles: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M3 5h4"/><path d="M3 9h4"/></svg>,
        Play: () => <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="5 3 19 12 5 21 5 3"/></svg>,
        Rotate: () => <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
      };

      // é™æ€æ•°æ®
      const STATIC_CARDS = [
        { title: "å¥½è¿åŠ æ»¡", wisdom: "å®‡å®™æ¥æ”¶åˆ°äº†ä½ çš„ä¿¡å·ï¼Œè¯·æŸ¥æ”¶ï¼", action: "ç»™è‡ªå·±ä¹°æŸèŠ±ï¼Œæˆ–è€…æ¢ä¸ªå¥½çœ‹çš„å£çº¸", themeColor: "#F472B6" },
        { title: "æ‹’ç»å†…è€—", wisdom: "ä½ çš„èƒ½é‡å¾ˆè´µï¼Œåˆ«æµªè´¹åœ¨ä¸å€¼å¾—çš„äº‹ä¸Šã€‚", action: "å…³é—­æœ‹å‹åœˆå…¥å£ï¼Œæˆ–è€…å‘å‘†5åˆ†é’Ÿ", themeColor: "#A855F7" },
        { title: "åŸåœ°èµ·é£", wisdom: "èŠœæ¹–ï¼ä»Šå¤©çš„å¿«ä¹æ˜¯è¿‡å±±è½¦çº§åˆ«çš„ï¼", action: "å¬ä¸€é¦–è¶…å—¨çš„æ­Œï¼Œè·Ÿç€æ‰­ä¸€æ‰­", themeColor: "#38BDF8" },
        { title: "ä½ æ˜¯è‡ªç”±çš„", wisdom: "ä¸ç”¨è®¨å¥½ä»»ä½•äººï¼Œé™¤äº†ä½ è‡ªå·±ã€‚", action: "æ‹’ç»ä¸€ä¸ªä¸æƒ³å»çš„èšä¼šæˆ–è¯·æ±‚", themeColor: "#FACC15" },
        { title: "é—ªé—ªå‘å…‰", wisdom: "ä½ æ˜¯é“¶æ²³ç³»é—è½åœ¨åœ°çƒçš„æ˜Ÿæ˜Ÿã€‚", action: "ç…§é•œå­å¤§å£°è¯´â€œæˆ‘çœŸå¥½çœ‹â€", themeColor: "#38BDF8" }
      ];

      // å¡ç‰‡ç»„ä»¶
      const Card = ({ id, index, totalCards, state, isFlipped, content, onClick }) => {
        const theme = useMemo(() => {
            const themes = [
                { bg: "bg-pink-400", text: "text-white" }, { bg: "bg-yellow-400", text: "text-pink-600" },
                { bg: "bg-sky-400", text: "text-white" }, { bg: "bg-purple-400", text: "text-white" },
                { bg: "bg-lime-400", text: "text-purple-600" }
            ];
            return themes[id % themes.length];
        }, [id]);

        const style = useMemo(() => {
          let transform = '';
          let zIndex = index;
          if (state === 'stacked') transform = `translate(-50%, -50%) rotate(${(id % 5) - 2}deg) translateY(${-index * 0.5}px)`;
          else if (state === 'spread') {
             const angle = (index - totalCards/2) * 6;
             const x = (index - totalCards/2) * 12;
             transform = `translate(calc(-50% + ${x}px), -50%) rotate(${angle}deg)`;
          }
          else if (state === 'selected') { transform = `translate(-50%, -50%) scale(1.05) rotate(0deg)`; zIndex = 1000; }
          else if (state === 'hidden') transform = `translate(-50%, 150vh)`;
          return { position: 'absolute', top: '50%', left: '50%', transform, zIndex, transition: 'all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1)', cursor: state === 'spread' ? 'pointer' : 'default' };
        }, [state, index, totalCards, id]);

        return (
          <div style={style} className="w-[80vw] max-w-[300px] h-[55vh] max-h-[440px] perspective-1000" onClick={() => state === 'spread' && onClick(id)}>
            <div className={`relative w-full h-full transition-transform duration-700 transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
              <div className={`absolute w-full h-full backface-hidden rounded-[24px] border-4 border-white shadow-xl ${theme.bg} flex flex-col items-center justify-center`}>
                <div className="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mb-4 text-white"><Icons.Cloud /></div>
                <div className="pop-font text-white text-2xl font-bold tracking-widest">GROWTH</div>
              </div>
              <div className="absolute w-full h-full backface-hidden rotate-y-180 rounded-[24px] bg-white border-4 border-white shadow-xl flex flex-col overflow-hidden">
                <div className={`flex-1 ${theme.bg} p-6 flex flex-col items-center justify-center text-center relative`}>
                   {content ? (
                     <div className="z-10 animate-in fade-in zoom-in duration-500">
                        <h2 className={`pop-font text-4xl font-bold mb-4 ${theme.text} drop-shadow-md`}>{content.title}</h2>
                        <div className="w-12 h-1 bg-white/50 rounded-full mx-auto mb-4"></div>
                        <p className={`font-bold opacity-90 ${theme.text} text-lg leading-relaxed`}>{content.wisdom}</p>
                     </div>
                   ) : <div className="text-white animate-spin"><Icons.Sparkles /></div>}
                </div>
                <div className="h-[28%] bg-white p-4 flex flex-col items-center justify-center text-center relative z-20">
                  <span className="text-xs font-bold text-slate-400 uppercase tracking-widest mb-1">Today's Action</span>
                  <p className="text-slate-800 font-bold pop-font text-lg leading-tight">{content?.action}</p>
                </div>
              </div>
            </div>
          </div>
        );
      };

      // ä¸»ç¨‹åº
      const App = () => {
        const [deckState, setDeckState] = useState('intro');
        const [selectedId, setSelectedId] = useState(null);
        const [cardContent, setCardContent] = useState(null);

        const fetchAIContent = async () => {
             if (!YOUR_API_KEY || YOUR_API_KEY.includes("ç²˜è´´")) {
                 // å¦‚æœæ²¡å¡« Keyï¼Œç›´æ¥ç»™éšæœºå¡ç‰‡ï¼Œä¸æŠ¥é”™
                 return STATIC_CARDS[Math.floor(Math.random() * STATIC_CARDS.length)];
             }
             try {
                const genAI = new GoogleGenerativeAI(YOUR_API_KEY);
                const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
                const result = await model.generateContent("ä¸ºä¸€ä½å¹´è½»å¥³æ€§ç”Ÿæˆä¸€ä¸ªâ€˜ä»Šæ—¥æˆé•¿æ—¥ç­¾â€™ã€‚JSONæ ¼å¼åŒ…å«: title(2-5å­—), wisdom(ä¸€å¥è¯), action(å°è¡ŒåŠ¨), themeColorã€‚é£æ ¼ï¼šå…ƒæ°”ã€å¿«ä¹ã€‚");
                const text = result.response.text();
                const jsonStr = text.match(/\{[\s\S]*\}/)[0];
                return JSON.parse(jsonStr);
             } catch (e) {
                console.error("AI Error", e);
                return STATIC_CARDS[Math.floor(Math.random() * STATIC_CARDS.length)];
             }
        };

        const startDeck = () => setDeckState('spread');

        const pickCard = async (id) => {
            setSelectedId(id);
            setDeckState('selected');
            const content = await fetchAIContent();
            setCardContent(content);
            setTimeout(() => setDeckState('revealed'), 600);
        };

        const reset = () => {
            setDeckState('intro');
            setSelectedId(null);
            setCardContent(null);
        };

        return (
          <div className="app-container">
            <div className="absolute top-[-10%] right-[-10%] w-[300px] h-[300px] bg-white/20 rounded-full blur-[80px] pointer-events-none" />
            
            <div className={`transition-all duration-700 absolute z-20 text-center flex flex-col items-center w-full px-4 ${deckState === 'intro' ? 'opacity-100 scale-100 top-[15%]' : 'opacity-0 scale-90 top-0 pointer-events-none'}`}>
                <h1 className="text-6xl md:text-8xl font-bold pop-font text-white drop-shadow-md -rotate-3 mb-2">Growth<br/>Daily</h1>
                
                {/* â¬‡ï¸ è¿™é‡Œå°±æ˜¯ä½ çš„ä»™å¥³æ–‡æ¡ˆ â¬‡ï¸ */}
                <div className="bg-white/20 backdrop-blur-md px-6 py-4 rounded-2xl text-white font-bold mb-8 text-base md:text-lg border-2 border-white/40 shadow-xl max-w-xs leading-relaxed transform rotate-1">
                   å“‡å“ˆå“ˆ ä½ æ¥å•¦ï¼ğŸ¥³<br/>
                   é‚£å°±ç»™ä½ æŠ½ä¸€å¼ <span className="text-yellow-300">æ¯æ—¥ä»™å¥³ğŸ§šâ€â™€ï¸å¡</span><br/>
                   <span className="text-xs opacity-90 mt-2 block">ï¼ˆæŠ½äº†è¦å®Œæˆçš„å» ä¸ç„¶ä¸‹æ¬¡ä¸è®©ä½ æŠ½ ğŸ˜œï¼‰</span>
                </div>
                {/* â¬†ï¸ ä»™å¥³æ–‡æ¡ˆç»“æŸ â¬†ï¸ */}

                <button onClick={startDeck} className="group relative px-8 py-3 bg-yellow-400 text-yellow-900 font-bold text-xl rounded-full shadow-[0_4px_0_rgb(202,138,4)] active:shadow-none active:translate-y-[4px] transition-all flex items-center gap-2 border-2 border-white">
                   <Icons.Play /> å¼€å§‹æŠ½å–
                </button>
            </div>

            <div className="relative w-full h-full flex items-center justify-center">
                {Array.from({length: 15}).map((_, i) => (
                    <Card 
                        key={i} id={i} index={i} totalCards={15} 
                        state={deckState === 'revealed' && selectedId === i ? 'selected' : (deckState === 'revealed' && selectedId !== i ? 'hidden' : deckState)} 
                        isFlipped={deckState === 'revealed' && selectedId === i}
                        content={cardContent}
                        onClick={pickCard}
                    />
                ))}
            </div>

            {deckState === 'revealed' && (
                <button onClick={reset} className="absolute bottom-10 z-50 px-6 py-3 bg-white text-slate-800 rounded-full font-bold shadow-lg flex items-center gap-2 animate-in fade-in active:scale-95 transition-transform">
                   <Icons.Rotate /> å†æŠ½ä¸€å¼ 
                </button>
            )}
          </div>
        );
      };

      const root = createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
</body>
</html>
